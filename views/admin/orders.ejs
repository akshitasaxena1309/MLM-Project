<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Order Page</title>
    <link rel="stylesheet" href="/css/admin/styles.css" />
    <link rel="stylesheet" href="/css/admin/orders.css" />
    <link rel="stylesheet" href="/css/common.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <style>
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 20px;
      }

      th,
      td {
        border: 3px solid rgba(14, 10, 10, 0.268);
        padding: 8px;
        text-align: left;
        background-color: white;
      }

      th {
        /* border: 3px solid rgba(255, 255, 255, 0.268); */
        background-color: white;
        color: black;
      }
    </style>
  </head>
  <body>
    <header>
      <h1>Order Page</h1>
    </header>

    <main>
      <%- partial('nav') %>
      <section>
        <div class="accordion" id="accordionExample">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseOne"
                aria-expanded="true"
                aria-controls="collapseOne"
              >
                User's Orders
              </button>
            </h2>
            <div
              id="collapseOne"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <table>
                  <thead>
                    <tr>
                      <th>Payment ID</th>
                      <th>Customer's Name</th>
                      <th>Customer's Email</th>

                      <th>Product Name</th>
                      <th>Quantity</th>
                      <th>Price</th>
                      <th>Date/Time</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% for (let i = 0; i < usersWithOrders.length; i++) { %> <%
                    for (let j = 0; j < usersWithOrders[i].orders.length; j++) {
                    %>
                    <tr>
                      <td><%= usersWithOrders[i].orders[j].orderNumber %></td>
                      <td><%= usersWithOrders[i].user.username %></td>
                      <td><%= usersWithOrders[i].user.email%></td>
                      <td>
                        <% for (let k = 0; k <
                        usersWithOrders[i].orders[j].products.length; k++) {
                        %><%= usersWithOrders[i].orders[j].products[k].name
                        %><br />
                        <% } %>
                      </td>
                      <td>
                        <% for (let k = 0; k <
                        usersWithOrders[i].orders[j].products.length; k++) {
                        %><%= usersWithOrders[i].orders[j].products[k].quantity
                        %>
                        <br /><% } %>
                      </td>
                      <td>
                        &#8377;<%= usersWithOrders[i].orders[j].totalAmount %>
                      </td>
                      <td>
                        <%=
                        usersWithOrders[i].orders[j].orderDate.toLocaleDateString()
                        %>
                      </td>
                    </tr>
                    <% } %><% } %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseTwo"
                aria-expanded="false"
                aria-controls="collapseTwo"
              >
                Seller's Orders
              </button>
            </h2>
            <div
              id="collapseTwo"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <table>
                  <thead>
                    <tr>
                      <th>Payment ID</th>
                      <th>Customer's Name</th>
                      <th>Customer's Email</th>

                      <th>Product Name</th>
                      <th>Quantity</th>
                      <th>Price</th>
                      <th>Date/Time</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% for (let i = 0; i < sellersWithOrders.length; i++) { %>
                    <% for (let j = 0; j < sellersWithOrders[i].orders.length;
                    j++) { %>
                    <tr>
                      <td><%= sellersWithOrders[i].orders[j].orderNumber %></td>
                      <td><%= sellersWithOrders[i].seller.username %></td>
                      <td><%= sellersWithOrders[i].seller.email%></td>

                      <td>
                        <% for (let k = 0; k <
                        sellersWithOrders[i].orders[j].products.length; k++) {
                        %><%= sellersWithOrders[i].orders[j].products[k].name
                        %><br />
                        <% } %>
                      </td>
                      <td>
                        <% for (let k = 0; k <
                        sellersWithOrders[i].orders[j].products.length; k++) {
                        %><%=
                        sellersWithOrders[i].orders[j].products[k].quantity %>
                        <br /><% } %>
                      </td>
                      <td>
                        &#8377;<%= sellersWithOrders[i].orders[j].totalAmount %>
                      </td>
                      <td>
                        <%=
                        sellersWithOrders[i].orders[j].orderDate.toLocaleDateString()
                        %>
                      </td>
                    </tr>
                    <% } %><% } %>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>

      </section>

    </main>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
